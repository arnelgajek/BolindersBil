@model VehicleForSaleViewModel
@{
    Layout = "~/Views/Shared/_VehicleForSaleLayout.cshtml";
}
<div class="container" style="margin-top:50px">
    <div class="row">
        <!-- Carousel: -->
        <div class="col-sm-12">
            <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                <!-- Foreach that loops through all the images concerning the specific vehicleId: -->
                <div class="carousel-inner" style="width:100%">
                    @foreach (var img in Model.Vehicle.Images)
                    {
                    <div class="carousel-item">
                        <img class="d-block w-100" src="@img.Path" alt="~/defaultimages/Image_Upload.png" data-toggle="modal" data-target="#vehicleModal">
                    </div>
                    }
                </div>
                <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Föregående</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Nästa</span>
                </a>
            </div>
        </div>

        <div class="col-sm-12 thumbs" style="background-color:white; margin-bottom:20px; padding:10px;">
            <!-- TODO: Link img to Modal: -->
            <div class="col-sm-12" style="margin:0 auto;">
                @foreach (var img in Model.Vehicle.Images)
                {
                    <img class="img-thumbnailSpecialOne justify-content-xl-center" src="@img.Path" />
                }
            </div>
        </div>

        <!-- Bilmärke: -->
        <div class="col-sm-12" style="background-color:white; margin-bottom:20px">
            <h1>@Model.Vehicle.Brand @Model.Vehicle.Model</h1>
        </div>
        <div class="col-sm-12" style="background-color:lavender; margin-bottom:20px; padding:10px;">
            <h6>
                <strong>Miltal: </strong>@Model.Vehicle.Kilometer <br />
                <strong>Modellbeskrivning: </strong>@Model.Vehicle.ModelDescription <br />
                <strong>År: </strong>@Model.Vehicle.Year <br />
                <strong>Kaross: </strong>@Model.Vehicle.Body <br />
                <strong>Färg: </strong>@Model.Vehicle.Color <br />
                <strong>Växellåda: </strong>@Model.Vehicle.Gearbox <br />
                <strong>Drivmedel: </strong>@Model.Vehicle.Fuel <br />
                <strong>Hästkrafter: </strong>@Model.Vehicle.Horsepower <br />
                <strong>Begagnad: </strong>@Model.Vehicle.Used <br />
                <strong>Leasbar: </strong>@Model.Vehicle.Leasable <br />
                <strong>Attribut: </strong>@Model.Vehicle.VehicleAttribute <br />
                @*<strong>Annons tillagd: </strong>@Model.Vehicle.AddedDate <br />
                <strong>Annons uppdaterad: </strong>@Model.Vehicle.UpdatedDate <br />*@
                <strong>Kontakta säljare: </strong> <a href="tel:+460 @Model.Vehicle.OfficeId.PhoneNumber">&#9742;</a>
            </h6>
            <h4><strong>Pris (SEK): </strong>@Model.Vehicle.Price</h4>
            <h4><strong>Pris Exkl. Moms (SEK): </strong>@Model.Vehicle.Price</h4> <!-- TODO: Räkna bort 25% från priset! -->
        </div>
        <div class="col-sm-12" style="background-color:orange; margin-bottom:20px; padding:10px;">
            <h1>PRISKALKYL:</h1>
        </div>
        <div class="col-sm-12" style="background-color:lightblue; margin-bottom:20px; padding:10px;">
            <h1>RELATERADE FORDON:</h1>
            @foreach(var v in Model.ListOfVehicles.Take(4))
            {
                <p>@v.Brand | @v.Price</p>
            }
        </div>
        <div class="col-sm-12" style="background-color:white; margin-bottom:20px; padding:10px;">
            <!-- Back to the page that lists all the vehicles: -->
            <form asp-action="Index" asp-controller="Vehicle">
                <input class="btn btn-warning" type="submit" value="Till alla fordon" />
            </form>
            @*Send vehicle to a friend*@
            <div class="vehicleButtons" style="float:right">
                <!-- This form and its button allows you to share the vehicle: -->
                <form asp-action="SendMail" asp-controller="Mail" method="get">
                    <div class="form-group">
                        <div class="input-group">
                            @*Values for the mail*@
                            <input asp-for="Link" type="hidden" id="UrlAdvert" value='@($"{Context.Request.Scheme}://{Context.Request.Host}{Context.Request.Path}{Context.Request.QueryString}")' />
                            <input asp-for="vehicleId" type="hidden" value="@Model.Vehicle.Id" />
                            <input asp-for="Brand" type="hidden" value="@Model.Vehicle.Brand" />
                            <input asp-for="Model" type="hidden" value="@Model.Vehicle.Model" />
                            <input asp-for="ModelDescription" type="hidden" value="@Model.Vehicle.ModelDescription" />
                            <input asp-for="Year" type="hidden" value="@Model.Vehicle.Year" />
                            <input asp-for="CurrentOffice" type="hidden" value="@Model.Vehicle.Office" />

                            @*Send the mail*@
                            <input asp-for="Email" class="form-control rounded" placeholder="Skicka vidare" pattern="[a-zA-Z0-9!#$%&'*+\/=?^_`{|}~.-]+@@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*" required />
                            <input class="btn btn-success" type="submit" value="Dela" />
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <!-- CrarouselModal: -->
        <div class="modal fade" id="vehicleModal">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-body align-self-center">
                        <div id="modalCarousel" class="carousel">
                                <img src=""  class="img-thumbnail"/>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-danger" type="button" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

